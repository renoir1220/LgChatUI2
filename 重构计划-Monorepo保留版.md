# LgChatUI2 é‡æ„è®¡åˆ’ - Monorepo ä¿ç•™ç‰ˆ

> åˆ¶å®šæ—¶é—´ï¼š2025-01-17  
> ç›®æ ‡ï¼šä¿ç•™ npm workspaces monorepo æ¶æ„ï¼Œä¼˜åŒ–ä»£ç ç»“æ„å’Œè´¨é‡

## ğŸ“Š é¡¹ç›®ç°çŠ¶åˆ†æ

### é¡¹ç›®è§„æ¨¡
- **å‰ç«¯æºç **ï¼š44 ä¸ª TS/TSX æ–‡ä»¶
- **åç«¯æºç **ï¼š29 ä¸ª TS æ–‡ä»¶  
- **å…±äº«åŒ…**ï¼š@lg/shared å·²å»ºç«‹
- **æ¶æ„**ï¼šnpm workspaces monorepo

### ä¸»è¦é—®é¢˜ç‚¹
1. **æ¶æ„æ··ä¹±**ï¼šå‰ç«¯å­˜åœ¨å¤šç§æ¶æ„æ¨¡å¼æ··ç”¨ï¼ˆcomponentsã€featuresã€entitiesã€widgetsã€pages ç­‰ï¼‰
2. **ç»„ä»¶è¿‡å¤§**ï¼šChatScreen.tsx ç­‰æ ¸å¿ƒç»„ä»¶ä»£ç é‡è¿‡å¤§ï¼Œéš¾ä»¥ç»´æŠ¤
3. **ç±»å‹å®‰å…¨é—®é¢˜**ï¼šå­˜åœ¨å¤§é‡ lint é”™è¯¯å’Œ any ç±»å‹ä½¿ç”¨
4. **é‡å¤ç›®å½•ç»“æ„**ï¼šfrontend/frontend åµŒå¥—ç›®å½•é—®é¢˜
5. **ä¾èµ–ç®¡ç†æ··ä¹±**ï¼šéƒ¨åˆ†åœ°æ–¹ä½¿ç”¨äº† pnpmï¼Œæ•´ä½“ä½¿ç”¨ npm

## ğŸ¯ é‡æ„ç›®æ ‡

### ä¿ç•™ä¼˜åŠ¿
- âœ… **npm workspaces** monorepo æ¶æ„
- âœ… **@lg/shared** ç±»å‹å…±äº«åŒ…
- âœ… **ä¸‰å±‚æ¶æ„**ï¼ˆfrontend + backend + sharedï¼‰
- âœ… **ç»Ÿä¸€å¼€å‘ç¯å¢ƒ**ï¼ˆä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡ï¼‰

### ä¼˜åŒ–é‡ç‚¹
- ğŸ”§ ç»Ÿä¸€å‰ç«¯æ¶æ„æ¨¡å¼
- ğŸ”§ æå‡ä»£ç è´¨é‡å’Œç±»å‹å®‰å…¨
- ğŸ”§ æ”¹å–„å¼€å‘ä½“éªŒ
- ğŸ”§ ç»„ä»¶æ‹†åˆ†å’Œå¤ç”¨

## ğŸ“ é‡æ„åç›®å½•ç»“æ„

```
LgChatUI2/
â”œâ”€â”€ packages/
â”‚   â””â”€â”€ shared/                    # ä¿æŒç°æœ‰å…±äº«åŒ…
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ types/            # ç±»å‹å®šä¹‰
â”‚       â”‚   â”‚   â”œâ”€â”€ api.ts        # API ç›¸å…³ç±»å‹
â”‚       â”‚   â”‚   â”œâ”€â”€ chat.ts       # èŠå¤©ç›¸å…³ç±»å‹
â”‚       â”‚   â”‚   â”œâ”€â”€ user.ts       # ç”¨æˆ·ç›¸å…³ç±»å‹
â”‚       â”‚   â”‚   â””â”€â”€ index.ts      # ç»Ÿä¸€å¯¼å‡º
â”‚       â”‚   â”œâ”€â”€ schemas/          # Zod éªŒè¯æ¨¡å¼
â”‚       â”‚   â”‚   â”œâ”€â”€ chat.ts       # èŠå¤©éªŒè¯
â”‚       â”‚   â”‚   â”œâ”€â”€ auth.ts       # è®¤è¯éªŒè¯
â”‚       â”‚   â”‚   â””â”€â”€ index.ts      # ç»Ÿä¸€å¯¼å‡º
â”‚       â”‚   â”œâ”€â”€ constants/        # å¸¸é‡å®šä¹‰
â”‚       â”‚   â”‚   â”œâ”€â”€ api.ts        # API å¸¸é‡
â”‚       â”‚   â”‚   â”œâ”€â”€ chat.ts       # èŠå¤©å¸¸é‡
â”‚       â”‚   â”‚   â””â”€â”€ index.ts      # ç»Ÿä¸€å¯¼å‡º
â”‚       â”‚   â””â”€â”€ index.ts          # åŒ…å…¥å£
â”‚       â”œâ”€â”€ package.json
â”‚       â”œâ”€â”€ tsconfig.json
â”‚       â””â”€â”€ README.md
â”œâ”€â”€ backend/                       # ä¿æŒç°æœ‰åç«¯ç»“æ„
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ modules/              # æŒ‰åŠŸèƒ½æ¨¡å—ç»„ç»‡
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.controller.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ auth.module.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ strategies/
â”‚   â”‚   â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chat.controller.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ chat.service.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ chat.module.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ tts/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tts.controller.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tts.service.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ tts.module.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ providers/
â”‚   â”‚   â”‚   â””â”€â”€ knowledge-base/
â”‚   â”‚   â”‚       â”œâ”€â”€ knowledge-base.controller.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ knowledge-base.service.ts
â”‚   â”‚   â”‚       â””â”€â”€ knowledge-base.module.ts
â”‚   â”‚   â”œâ”€â”€ shared/               # åç«¯å…±äº«ä»£ç 
â”‚   â”‚   â”‚   â”œâ”€â”€ database/
â”‚   â”‚   â”‚   â”œâ”€â”€ pipes/
â”‚   â”‚   â”‚   â”œâ”€â”€ guards/
â”‚   â”‚   â”‚   â””â”€â”€ repositories/
â”‚   â”‚   â”œâ”€â”€ app.module.ts
â”‚   â”‚   â””â”€â”€ main.ts
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ frontend/                      # ç®€åŒ–å‰ç«¯æ¶æ„
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/           # å±•ç¤ºç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ ui/              # shadcn/ui ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ input.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ dialog.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚   â”œâ”€â”€ chat/            # èŠå¤©ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ChatInput.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ChatMessage.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ChatMessageList.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ChatSidebar.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ VoicePlayer.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ knowledge-base/  # çŸ¥è¯†åº“ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ KnowledgeBaseSelector.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CitationList.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Citation.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/            # è®¤è¯ç›¸å…³ç»„ä»¶
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LoginScreen.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ RequireAuth.tsx
â”‚   â”‚   â”‚   â””â”€â”€ common/          # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”‚       â”œâ”€â”€ ImageThumb.tsx
â”‚   â”‚   â”‚       â”œâ”€â”€ LightboxViewer.tsx
â”‚   â”‚   â”‚       â””â”€â”€ ContentWithImages.tsx
â”‚   â”‚   â”œâ”€â”€ features/             # åŠŸèƒ½æ¨¡å—ï¼ˆä¸šåŠ¡é€»è¾‘ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ types/
â”‚   â”‚   â”‚   â”œâ”€â”€ chat/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useStreamChat.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ useChatActions.ts
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ useChatState.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ chatService.ts
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ utils/
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ messageCache.ts
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ knowledge-base/
â”‚   â”‚   â”‚       â”œâ”€â”€ hooks/
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ useKnowledgeBases.ts
â”‚   â”‚   â”‚       â”œâ”€â”€ services/
â”‚   â”‚   â”‚       â””â”€â”€ types/
â”‚   â”‚   â”œâ”€â”€ hooks/               # å…¨å±€è‡ªå®šä¹‰ hooks
â”‚   â”‚   â”‚   â””â”€â”€ useConversations.ts
â”‚   â”‚   â”œâ”€â”€ services/            # å…¨å±€ API æœåŠ¡
â”‚   â”‚   â”‚   â”œâ”€â”€ api.ts
â”‚   â”‚   â”‚   â””â”€â”€ authService.ts
â”‚   â”‚   â”œâ”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts
â”‚   â”‚   â”‚   â””â”€â”€ imageUtils.ts
â”‚   â”‚   â”œâ”€â”€ contexts/            # React contexts
â”‚   â”‚   â”‚   â”œâ”€â”€ ChatContext.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ NotificationContext.tsx
â”‚   â”‚   â”‚   â””â”€â”€ SettingsContext.tsx
â”‚   â”‚   â”œâ”€â”€ App.tsx
â”‚   â”‚   â””â”€â”€ main.tsx
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ vite.config.ts
â”‚   â”œâ”€â”€ tsconfig.json
â”‚   â””â”€â”€ README.md
â””â”€â”€ package.json                   # æ ¹é…ç½®ä¿æŒä¸å˜
```

## ğŸ”„ å…·ä½“é‡æ„æ–¹æ¡ˆ

### é˜¶æ®µä¸€ï¼šåŸºç¡€æ¸…ç†ï¼ˆä¼˜å…ˆçº§ï¼šğŸ”´ é«˜ï¼‰

#### ç¬¬ä¸€å‘¨ä»»åŠ¡
1. **æ¸…ç†é‡å¤ç›®å½•ç»“æ„**
   - [ ] ç§»é™¤ `frontend/frontend/` åµŒå¥—ç›®å½•
   - [ ] ç»Ÿä¸€ä½¿ç”¨ npm åŒ…ç®¡ç†å™¨ï¼ˆç§»é™¤ pnpm ç›¸å…³æ–‡ä»¶ï¼‰
   - [ ] æ¸…ç†æ— ç”¨çš„ node_modules

2. **ä¿®å¤åŸºç¡€é…ç½®é—®é¢˜**
   - [ ] ç»Ÿä¸€ TypeScript é…ç½®
   - [ ] ä¿®å¤ ESLint é…ç½®å†²çª
   - [ ] å®Œå–„ @lg/shared åŒ…æ„å»º

3. **ç±»å‹å®‰å…¨åˆæ­¥ä¿®å¤**
   - [ ] è¯†åˆ«å¹¶åˆ—å‡ºæ‰€æœ‰ any ç±»å‹ä½¿ç”¨
   - [ ] ä¿®å¤æ˜æ˜¾çš„ TypeScript é”™è¯¯
   - [ ] å®Œå–„ import/export è§„èŒƒ

### é˜¶æ®µäºŒï¼šæ¶æ„æ•´ç†ï¼ˆä¼˜å…ˆçº§ï¼šğŸŸ¡ ä¸­ï¼‰

#### ç¬¬äºŒå‘¨ä»»åŠ¡
1. **å‰ç«¯ç›®å½•é‡ç»„**
   - [ ] ç§»é™¤å¤šä½™çš„æ¶æ„å±‚ï¼ˆentitiesã€widgetsã€pagesï¼‰
   - [ ] æŒ‰æ–°çš„ç›®å½•ç»“æ„é‡æ–°ç»„ç»‡æ–‡ä»¶
   - [ ] ç»Ÿä¸€ç»„ä»¶å¯¼å…¥/å¯¼å‡ºè§„èŒƒ

2. **ç»„ä»¶æ‹†åˆ†**
   - [ ] æ‹†åˆ† ChatScreen.tsxï¼ˆå½“å‰è¿‡å¤§ï¼‰
   - [ ] æå–å¯å¤ç”¨çš„å­ç»„ä»¶
   - [ ] ä¼˜åŒ–ç»„ä»¶ props è®¾è®¡

3. **çŠ¶æ€ç®¡ç†ä¼˜åŒ–**
   - [ ] ç®€åŒ– Context ä½¿ç”¨
   - [ ] ä¼˜åŒ– hooks ä¾èµ–å…³ç³»
   - [ ] æ”¹è¿›é”™è¯¯å¤„ç†æœºåˆ¶

### é˜¶æ®µä¸‰ï¼šåŠŸèƒ½å®Œå–„ï¼ˆä¼˜å…ˆçº§ï¼šğŸŸ¢ ä¸­ï¼‰

#### ç¬¬ä¸‰å‘¨ä»»åŠ¡
1. **API å±‚ä¼˜åŒ–**
   - [ ] ç»Ÿä¸€ API è°ƒç”¨å°è£…
   - [ ] å®Œå–„é”™è¯¯å¤„ç†
   - [ ] ä¼˜åŒ–ç±»å‹å®šä¹‰

2. **ç”¨æˆ·ä½“éªŒæ”¹è¿›**
   - [ ] ä¼˜åŒ–åŠ è½½çŠ¶æ€
   - [ ] æ”¹å–„é”™è¯¯æç¤º
   - [ ] å®Œå–„äº¤äº’ç»†èŠ‚

3. **ä»£ç è´¨é‡æå‡**
   - [ ] æ·»åŠ å¿…è¦çš„å•å…ƒæµ‹è¯•
   - [ ] å®Œå–„ä»£ç æ³¨é‡Š
   - [ ] ä¼˜åŒ–æ€§èƒ½ç“¶é¢ˆ

### é˜¶æ®µå››ï¼šæ€§èƒ½ä¼˜åŒ–ï¼ˆä¼˜å…ˆçº§ï¼šğŸ”µ ä½ï¼‰

#### ç¬¬å››å‘¨ä»»åŠ¡
1. **æ„å»ºä¼˜åŒ–**
   - [ ] ä¼˜åŒ– Vite é…ç½®
   - [ ] æ”¹å–„çƒ­é‡è½½æ€§èƒ½
   - [ ] ä¼˜åŒ–æ‰“åŒ…ä½“ç§¯

2. **è¿è¡Œæ—¶ä¼˜åŒ–**
   - [ ] å®ç°ä»£ç åˆ†å‰²
   - [ ] ä¼˜åŒ–å›¾ç‰‡åŠ è½½
   - [ ] å†…å­˜æ³„æ¼æ£€æŸ¥

3. **ç›‘æ§å’Œæ–‡æ¡£**
   - [ ] æ·»åŠ æ€§èƒ½ç›‘æ§
   - [ ] æ›´æ–°é¡¹ç›®æ–‡æ¡£
   - [ ] åˆ¶å®šå¼€å‘è§„èŒƒ

## ğŸ“‹ è¯¦ç»†ä»»åŠ¡æ¸…å•

### ç«‹å³æ‰§è¡Œï¼ˆæœ¬å‘¨ï¼‰
- [ ] **æ¸…ç† frontend/frontend åµŒå¥—ç›®å½•**
  - ç§»åŠ¨ `frontend/frontend/` ä¸‹çš„å†…å®¹åˆ° `frontend/`
  - åˆ é™¤å¤šä½™çš„ç›®å½•å’Œé…ç½®æ–‡ä»¶
  - æ›´æ–°ç›¸å…³çš„è·¯å¾„å¼•ç”¨

- [ ] **ç»Ÿä¸€åŒ…ç®¡ç†å™¨**
  - åˆ é™¤ `pnpm-lock.yaml`
  - ç¡®ä¿æ‰€æœ‰åœ°æ–¹ä½¿ç”¨ npm
  - é‡æ–°å®‰è£…ä¾èµ–

- [ ] **ä¿®å¤ TypeScript åŸºç¡€é”™è¯¯**
  - è¿è¡Œ `npm run lint` è¯†åˆ«é—®é¢˜
  - ä¿®å¤ import/export é”™è¯¯
  - å¤„ç†æ˜æ˜¾çš„ç±»å‹é—®é¢˜

### ä¸‹å‘¨è®¡åˆ’
- [ ] **é‡æ„ ChatScreen.tsx**
  - æ‹†åˆ†ä¸ºå¤šä¸ªå­ç»„ä»¶
  - æå–ä¸šåŠ¡é€»è¾‘åˆ° hooks
  - ä¼˜åŒ– props ä¼ é€’

- [ ] **æ•´ç†ç›®å½•ç»“æ„**
  - æŒ‰æ–°çš„æ¶æ„ç§»åŠ¨æ–‡ä»¶
  - æ›´æ–°æ‰€æœ‰ import è·¯å¾„
  - ç»Ÿä¸€å‘½åè§„èŒƒ

## ğŸ”§ ä¿ç•™çš„ Monorepo ä¼˜åŠ¿

1. **ç»Ÿä¸€ä¾èµ–ç®¡ç†**
   - ç»§ç»­ä½¿ç”¨ npm workspaces
   - ä¾èµ–å»é‡å’Œç‰ˆæœ¬ç»Ÿä¸€
   - ç®€åŒ–å®‰è£…å’Œæ›´æ–°æµç¨‹

2. **ç±»å‹å…±äº«**
   - @lg/shared åŒ…æä¾›ç±»å‹å®‰å…¨
   - å‰åç«¯ API å¥‘çº¦ä¸€è‡´æ€§
   - å‡å°‘ç±»å‹å®šä¹‰é‡å¤

3. **å¼€å‘ä¾¿åˆ©æ€§**
   - ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
   - ç»Ÿä¸€çš„æ„å»ºå’Œæµ‹è¯•æµç¨‹
   - é›†ä¸­çš„é…ç½®ç®¡ç†

4. **ä»£ç å¤ç”¨**
   - å·¥å…·å‡½æ•°å’Œå¸¸é‡å…±äº«
   - éªŒè¯é€»è¾‘å¤ç”¨
   - ç»Ÿä¸€çš„é”™è¯¯å¤„ç†

## ğŸ’¡ å…³é”®è®¾è®¡å†³ç­–

### æ¶æ„åŸåˆ™
1. **æ¸è¿›å¼é‡æ„**ï¼šåˆ†é˜¶æ®µè¿›è¡Œï¼Œç¡®ä¿ç³»ç»Ÿç¨³å®šæ€§
2. **ç±»å‹å®‰å…¨ä¼˜å…ˆ**ï¼šæ‰€æœ‰é‡æ„éƒ½ä»¥æå‡ç±»å‹å®‰å…¨ä¸ºç›®æ ‡
3. **å¼€å‘ä½“éªŒä¼˜åŒ–**ï¼šæ”¹å–„æ„å»ºé€Ÿåº¦å’Œè°ƒè¯•ä½“éªŒ
4. **ä¿æŒå‘åå…¼å®¹**ï¼šé‡æ„è¿‡ç¨‹ä¸­ä¸ç ´åç°æœ‰åŠŸèƒ½

### æŠ€æœ¯é€‰æ‹©
- **å‰ç«¯æ¶æ„**ï¼šFeatures + Components æ¨¡å¼
- **çŠ¶æ€ç®¡ç†**ï¼šReact Context + Custom Hooks
- **ç±»å‹ç³»ç»Ÿ**ï¼šä¸¥æ ¼çš„ TypeScript + Zod éªŒè¯
- **ç»„ä»¶åº“**ï¼šç»§ç»­ä½¿ç”¨ shadcn/ui + Tailwind CSS

## ğŸ“ˆ æˆåŠŸæŒ‡æ ‡

### ä»£ç è´¨é‡æŒ‡æ ‡
- [ ] ESLint é”™è¯¯æ•°é‡ï¼š0
- [ ] TypeScript é”™è¯¯æ•°é‡ï¼š0
- [ ] ä»£ç é‡å¤ç‡ï¼š< 5%
- [ ] æµ‹è¯•è¦†ç›–ç‡ï¼š> 70%

### å¼€å‘ä½“éªŒæŒ‡æ ‡
- [ ] æ„å»ºæ—¶é—´ï¼š< 30s
- [ ] çƒ­é‡è½½æ—¶é—´ï¼š< 3s
- [ ] æ–°äººä¸Šæ‰‹æ—¶é—´ï¼š< 2h

### æ€§èƒ½æŒ‡æ ‡
- [ ] é¦–å±åŠ è½½æ—¶é—´ï¼š< 2s
- [ ] äº¤äº’å“åº”æ—¶é—´ï¼š< 100ms
- [ ] åŒ…ä½“ç§¯ï¼š< 1MBï¼ˆgzippedï¼‰

## ğŸš€ å¼€å§‹å®æ–½

### ç¬¬ä¸€æ­¥ï¼šç¯å¢ƒå‡†å¤‡
```bash
# 1. å¤‡ä»½å½“å‰ä»£ç 
git checkout -b refactor-backup

# 2. æ¸…ç†ä¾èµ–
npm run clean:deps
npm install

# 3. æ„å»ºå…±äº«åŒ…
npm run build:shared

# 4. æ£€æŸ¥å½“å‰çŠ¶æ€
npm run lint
npm run typecheck
```

### ç¬¬äºŒæ­¥ï¼šå¼€å§‹é‡æ„
ä»é˜¶æ®µä¸€å¼€å§‹ï¼ŒæŒ‰ç…§æ¸…å•é€é¡¹å®Œæˆã€‚æ¯å®Œæˆä¸€ä¸ªé˜¶æ®µï¼Œè¿›è¡Œä»£ç æäº¤å’Œæµ‹è¯•éªŒè¯ã€‚

---

**æœ€åæ›´æ–°æ—¶é—´**ï¼š2025-01-17  
**è´Ÿè´£äºº**ï¼šå¼€å‘å›¢é˜Ÿ  
**é¢„è®¡å®Œæˆæ—¶é—´**ï¼š4 å‘¨