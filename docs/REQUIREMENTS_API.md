# Requirements API æ–‡æ¡£

## æ¦‚è¿°

Requirements API æä¾›éœ€æ±‚ä¿¡æ¯çš„æŸ¥è¯¢å’Œæœç´¢åŠŸèƒ½ï¼Œæ”¯æŒå¤šå…³é”®è¯æœç´¢å’Œåˆ†é¡µæŸ¥è¯¢ã€‚

## åŸºç¡€ä¿¡æ¯

**Base URL**: `http://your-domain:3000/api/requirements`

**è®¤è¯**: éœ€è¦æœ‰æ•ˆçš„JWT Tokenï¼ˆé€šè¿‡Authorization headerä¼ é€’ï¼‰

## API ç«¯ç‚¹

### 1. æ ¹æ®å®¢æˆ·åç§°æŸ¥è¯¢éœ€æ±‚åˆ—è¡¨

#### GET /api/requirements/by-customer

æ ¹æ®å®¢æˆ·åç§°æŸ¥è¯¢éœ€æ±‚åˆ—è¡¨ï¼Œæ”¯æŒåˆ†é¡µã€‚

**è¯·æ±‚å‚æ•°**ï¼š
- `customerName` (string, å¿…å¡«): å®¢æˆ·åç§°
- `page` (number, å¯é€‰): é¡µç ï¼Œé»˜è®¤ä¸º1
- `pageSize` (number, å¯é€‰): æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ä¸º10ï¼Œæœ€å¤§100

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```bash
GET /api/requirements/by-customer?customerName=åŒ—äº¬å¤§å­¦ç¬¬ä¸‰åŒ»é™¢&page=1&pageSize=20
```

**å“åº”æ ¼å¼**ï¼š
```json
{
  "requirements": [
    {
      "requirementCode": "XQ_250707011",
      "siteName": "",
      "product": "åŒºåŸŸç—…ç†é€æ£€å¹³å°",
      "requirementName": "åŒºåŸŸé€æ£€å¹³å°æ”¯æŒå¤–é™¢æ¡ç ",
      "currentStage": "ç°åœºæ›´æ–°",
      "content": "éœ€æ±‚æè¿°å†…å®¹...",
      "requirementEvaluation": "å…ˆæœ‰æ¥å£æ–‡æ¡£å†å¼€å‘",
      "designContent": "è®¾è®¡æ–¹æ¡ˆ...",
      "productDescription": "äº§å“æè¿°...",
      "developmentDescription": "å¼€å‘è¯´æ˜...",
      "creator": "åˆ›å»ºäºº",
      "customerName": "åŒ—äº¬å¤§å­¦ç¬¬ä¸‰åŒ»é™¢",
      "versionName": "V2.2.30(åŒºåŸŸç—…ç†é€æ£€å¹³å°)",
      "createDate": "2025-07-07",
      "lastUpdateDate": "2025-08-18"
    }
  ],
  "total": 15
}
```

### 2. å¤šå…³é”®è¯æœç´¢éœ€æ±‚åˆ—è¡¨

#### GET /api/requirements/search

ğŸ†• **æ–°å¢åŠŸèƒ½** - æ ¹æ®å…³é”®è¯æœç´¢éœ€æ±‚åˆ—è¡¨ï¼Œæ”¯æŒå¤šå…³é”®è¯ç»„åˆæŸ¥è¯¢ã€‚

**è¯·æ±‚å‚æ•°**ï¼š
- `keywords` (string, å¿…å¡«): æœç´¢å…³é”®è¯ï¼Œæ”¯æŒç©ºæ ¼æˆ–é€—å·åˆ†å‰²çš„å¤šä¸ªå…³é”®è¯
- `page` (number, å¯é€‰): é¡µç ï¼Œé»˜è®¤ä¸º1
- `pageSize` (number, å¯é€‰): æ¯é¡µæ•°é‡ï¼Œé»˜è®¤ä¸º10ï¼Œæœ€å¤§100

**æœç´¢å­—æ®µ**ï¼š
æœç´¢ä¼šåœ¨ä»¥ä¸‹å­—æ®µä¸­è¿›è¡ŒåŒ¹é…ï¼š
- `requirementName`: éœ€æ±‚åç§°
- `content`: å†…å®¹æè¿°
- `requirementEvaluation`: éœ€æ±‚è¯„ä¼°
- `designContent`: è®¾è®¡å†…å®¹
- `productDescription`: äº§å“æè¿°
- `developmentDescription`: å¼€å‘æè¿°

**æœç´¢é€»è¾‘**ï¼š
- **å¤šå…³é”®è¯ AND å…³ç³»**: æ‰€æœ‰å…³é”®è¯éƒ½å¿…é¡»åŒ¹é…
- **å­—æ®µ OR å…³ç³»**: æ¯ä¸ªå…³é”®è¯å¯ä»¥åœ¨ä»»æ„æœç´¢å­—æ®µä¸­å‡ºç°
- **é¡ºåºæ— å…³**: ä¸é™åˆ¶å…³é”®è¯åœ¨å­—æ®µä¸­çš„å‡ºç°é¡ºåº
- **æ¨¡ç³ŠåŒ¹é…**: ä½¿ç”¨LIKEè¿›è¡Œæ¨¡ç³ŠåŒ¹é…

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```bash
# å•ä¸ªå…³é”®è¯æœç´¢
GET /api/requirements/search?keywords=åŒ»é™¢

# å¤šå…³é”®è¯æœç´¢ï¼ˆç©ºæ ¼åˆ†å‰²ï¼‰
GET /api/requirements/search?keywords=åŒ»é™¢ ç³»ç»Ÿ

# å¤šå…³é”®è¯æœç´¢ï¼ˆé€—å·åˆ†å‰²ï¼‰
GET /api/requirements/search?keywords=åŒ»é™¢,ç³»ç»Ÿ,å‡çº§

# å¸¦åˆ†é¡µçš„æœç´¢
GET /api/requirements/search?keywords=å¹³å° æ¥å£&page=2&pageSize=20
```

**å“åº”æ ¼å¼**ï¼š
```json
{
  "requirements": [
    {
      "requirementCode": "XQ_250707011",
      "siteName": "",
      "product": "åŒºåŸŸç—…ç†é€æ£€å¹³å°",
      "requirementName": "åŒºåŸŸé€æ£€å¹³å°æ”¯æŒå¤–é™¢æ¡ç ",
      "currentStage": "ç°åœºæ›´æ–°",
      "content": "éœ€æ±‚æè¿°å†…å®¹...",
      "requirementEvaluation": "å…ˆæœ‰æ¥å£æ–‡æ¡£å†å¼€å‘",
      "designContent": "è®¾è®¡æ–¹æ¡ˆ...",
      "productDescription": "äº§å“æè¿°...",
      "developmentDescription": "å¼€å‘è¯´æ˜...",
      "creator": "åˆ›å»ºäºº",
      "customerName": "å®¢æˆ·åç§°",
      "versionName": "ç‰ˆæœ¬ä¿¡æ¯",
      "createDate": "2025-07-07",
      "lastUpdateDate": "2025-08-18"
    }
  ],
  "total": 35
}
```

### 3. ç»Ÿè®¡å®¢æˆ·éœ€æ±‚æ•°é‡

#### GET /api/requirements/count-by-customer

æŸ¥è¯¢æŒ‡å®šå®¢æˆ·çš„éœ€æ±‚æ€»æ•°ã€‚

**è¯·æ±‚å‚æ•°**ï¼š
- `customerName` (string, å¿…å¡«): å®¢æˆ·åç§°

**è¯·æ±‚ç¤ºä¾‹**ï¼š
```bash
GET /api/requirements/count-by-customer?customerName=åŒ—äº¬å¤§å­¦ç¬¬ä¸‰åŒ»é™¢
```

**å“åº”æ ¼å¼**ï¼š
```json
{
  "total": 25
}
```

## é”™è¯¯å¤„ç†

### é”™è¯¯å“åº”æ ¼å¼

æ‰€æœ‰APIé”™è¯¯éƒ½ä½¿ç”¨ç»Ÿä¸€çš„å“åº”æ ¼å¼ï¼š

```json
{
  "statusCode": 400,
  "message": "é”™è¯¯æè¿°ä¿¡æ¯",
  "error": "è¯¦ç»†é”™è¯¯ä¿¡æ¯",
  "timestamp": "2025-09-02T11:30:23.214Z",
  "path": "/api/requirements/search"
}
```

### å¸¸è§é”™è¯¯ç 

| çŠ¶æ€ç  | æè¿° | å¸¸è§åŸå›  |
|--------|------|----------|
| 400 | è¯·æ±‚å‚æ•°é”™è¯¯ | keywordsä¸ºç©ºã€page/pageSizeæ ¼å¼é”™è¯¯ |
| 401 | æœªæˆæƒ | ç¼ºå°‘æˆ–æ— æ•ˆçš„JWT Token |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | æ•°æ®åº“è¿æ¥å¤±è´¥ã€æŸ¥è¯¢è¶…æ—¶ |

### é”™è¯¯ç¤ºä¾‹

**å‚æ•°éªŒè¯å¤±è´¥**ï¼š
```json
{
  "statusCode": 400,
  "message": "Validation failed",
  "error": "è‡³å°‘éœ€è¦ä¸€ä¸ªæœ‰æ•ˆçš„æœç´¢å…³é”®è¯"
}
```

**æœåŠ¡å™¨é”™è¯¯**ï¼š
```json
{
  "statusCode": 500,
  "message": "æœç´¢éœ€æ±‚åˆ—è¡¨å¤±è´¥",
  "error": "æ ¹æ®å…³é”®è¯æœç´¢éœ€æ±‚åˆ—è¡¨å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•"
}
```

## ä½¿ç”¨å»ºè®®

### æ€§èƒ½ä¼˜åŒ–

1. **åˆç†è®¾ç½®åˆ†é¡µå¤§å°**: å»ºè®®pageSizeè®¾ç½®ä¸º10-50ï¼Œé¿å…ä¸€æ¬¡æŸ¥è¯¢è¿‡å¤šæ•°æ®
2. **ç²¾ç¡®å…³é”®è¯**: ä½¿ç”¨å…·ä½“çš„å…³é”®è¯å¯ä»¥æé«˜æŸ¥è¯¢æ•ˆç‡
3. **é¿å…è¿‡äºå®½æ³›çš„æœç´¢**: å•ä¸ªå­—ç¬¦çš„å…³é”®è¯å¯èƒ½è¿”å›å¤§é‡ç»“æœ

### æœç´¢æŠ€å·§

1. **ç»„åˆæœç´¢**: ä½¿ç”¨å¤šä¸ªå…³é”®è¯å¯ä»¥è·å¾—æ›´ç²¾ç¡®çš„ç»“æœ
2. **å…³é”®è¯é€‰æ‹©**: é€‰æ‹©éœ€æ±‚ä¸­å¸¸è§çš„æŠ€æœ¯æœ¯è¯­ã€äº§å“åç§°æˆ–åŠŸèƒ½æè¿°
3. **å®¢æˆ·åç§°æœç´¢**: å¦‚æœçŸ¥é“å…·ä½“å®¢æˆ·ï¼Œå»ºè®®ä½¿ç”¨å®¢æˆ·åç§°æŸ¥è¯¢æ¥å£

## æ›´æ–°æ—¥å¿—

### v1.1.0 (2025-09-02)
- ğŸ†• æ–°å¢å¤šå…³é”®è¯æœç´¢API (`/api/requirements/search`)
- âœ¨ æ”¯æŒç©ºæ ¼å’Œé€—å·åˆ†å‰²çš„å¤šå…³é”®è¯æŸ¥è¯¢
- ğŸ” æœç´¢è¦†ç›–6ä¸ªæ ¸å¿ƒå­—æ®µ
- ğŸ“– å®Œå–„APIæ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹

### v1.0.0 
- ğŸ“ åŸºç¡€éœ€æ±‚æŸ¥è¯¢åŠŸèƒ½
- ğŸ‘¥ å®¢æˆ·åç§°æŸ¥è¯¢æ¥å£
- ğŸ“Š éœ€æ±‚ç»Ÿè®¡æ¥å£

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿã€‚